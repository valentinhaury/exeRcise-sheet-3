---
title: "Exercise #X"
subtitle: "Fortgeschrittene Statistische Software f√ºr NF"
author: "Valentin Haury (12686340)"
date: "`r Sys.Date()`"
output: distill::distill_article
---

## Librarys

```{r}
# in this codeblock the most important libraries are loaded
  library(ggplot2)
  library(dplyr)
  library(readr)
  library(tidyverse)
  library(knitr)
  library(easystats)
```


## Exercise 1: Initializing git (4 Points)

For this whole exercise sheet we will be tracking all our changes to it
in git.

a)  
b)  
c) 

d)

- strength:
  - backups of the project can be used to undo changes
  - version control that makes working on projects in teams easier and helps merging different versions of a project
- weaknesses:
  - extra effort needed to create and update the project in git
  - multiple different versions can exist at the same time, possibly creating confusion
  
e)


## Exercise 2: Putting your Repository on GitHub (3 Points)

For this task you will upload your solution to GitHub.

a)  Link to the repository:

[GitHub](https://github.com/valentinhaury/exeRcise-sheet-3)

b)  
c)


## Exercise 3: Pixar Films (4 Points)

a)

```{r}
#Load data 
pixar_films <- readr::read_csv('data/pixar_films.csv')
#remove movies without title
pixar_films <- pixar_films %>% filter(!is.na(film))
#inspect "film_rating"
pixar_films %>% distinct(film_rating) %>% head(10)
#create factor film_rating_factor
pixar_films$film_rating_factor <- factor(pixar_films$film_rating)

```

The variable "film_rating" can have the values:
 - G    :suitable for the general audience
 - PG   :parental guidance is suggested
 - N/A  :no rating available 
 
A factor variable consists of finite nominal or ordinal categories. The film_rating variable fits this restrictions.

b)
    
```{r}
#adding series variable to all movies
pixar_films <- pixar_films %>% 
  mutate(
    series = case_when(
      film %in% c("Toy Story", "Toy Story 2", "Toy Story 3", "Toy Story 4") ~ "Toy Story",
      film %in% c("Monsters, Inc.", "Monsters University") ~ "Monsters",
      film %in% c("The Incredibles", "Incredibles 2") ~ "Incredibles",
      film %in% c("Cars", "Cars 2", "Cars 3") ~ "Cars",
      film %in% c("Finding Nemo", "Finding Dory") ~ "Nemo",
      TRUE ~ film
    ) 
  ) %>%
  group_by(series) %>%
  mutate(count = n()) %>%
  ungroup()

#creating series dataframe with movie-titles as one String
pixar_series <- pixar_films %>%
  group_by(series) %>%
  summarise(
    movies_in_series = paste(film, collapse = ", "),
    film_count = n(),
    .groups = "drop"
  )
#output
pixar_series %>% head(10)
```
    
    
Toy Story: Toy Story; Toy Story 2; Toy Story 3; Toy Story 4
Monsters: Monsters, Inc.; Monsters University
Incredibles: The Incredibles; Incredibles 2
Cars: Cars; Cars 2; Cars 3
Nemo: Finding Nemo; Finding Dory

c)  

```{r}
#loading data
public_response <- readr::read_csv('data/public_response.csv')
#changing cinema_score to ascending factor
public_response$cinema_score <- factor(public_response$cinema_score,
                                             levels = c("A-", "A", "A+"),
                                             ordered = TRUE)
#combining the dataframes
pixar_films <- full_join(pixar_films, public_response, by = "film")
```

d)  

```{r}
#plot for all Pixar-movies
ggplot(pixar_films, aes(y = cinema_score, x = fct_reorder2(film, series, -as.numeric(release_date)))) +
  geom_bar(stat = "identity") +
  facet_wrap(~series, scales = "free_x") +
  labs(x="Movie", y = "Cinema-Score", title = "Cinema-Score for Pixar-movies grouped by Series")
#plot for Pixar-series with more then 1 movie
pixar_films %>% 
  filter(count > 1) %>%
  ggplot(aes(y = metacritic, x = series, fill = film, group = interaction(series, release_date))) +
    geom_bar(stat = "identity", position = position_dodge()) +
    labs(x="Series", y = "Metacritic-Score", title = "Metacritic-Score for Pixar-movies grouped by Series", fill = "Movie") +
    theme(axis.text.x = element_text(angle = 60, hjust = 1))
```

The first movie of a series always has the best Metacritic-Score. If there is a 3rd movie it is better then the 2nd one, but in general the movies of a series decline in quality acording to the Metacritic-Score.   


## Exercise 4: Open Analysis (4 points)

This exercise is a bit more open-ended. You can choose any dataset from
[Our World in Data](https://ourworldindata.org/) and analyze it, while
determining the research question yourself.

a)  Go to <https://github.com/owid/owid-datasets/tree/master/datasets>
    and choose a dataset that interests you. You can have a look at
    <https://ourworldindata.org/> to gather some inspiration.
b)  Download the dataset and track it in git.
c)  Put the name / title of the dataset and a link to it below.

-   Dataset Name: ...
-   Link: <https://github.com/owid/owid-datasets/>...

d)  Come up with a (research) question you want to answer with the data
    and briefly explain why you believe this is an interesting question
    within one sentence. It should be a question that can be answered
    with the dataset and using R.
e)  Use R to answer your chosen question. Please limit your analysis to
    the functions and techniques we have covered so far in the course.
    You are **not expected** to use advanced statistical models or
    external packages which haven't been introduced.
f)  Create a meaningful plot / figure with the dataset. Make sure to
    provide a figure caption (via the chunk options / Rmarkdown) and
    correctly label the figure.

## Final Note

Make sure to push all your commits and changes to GitHub before
submitting the exercise sheet.
